# import Post from "./generated/prisma.graphql"

type Query {
	feed(after: String, first: Int): PostConnection!
	post(id: ID!): Post
	me: User
	usersConnection(after: String, first: Int): UserConnection!
	jobApplicationsConnection(after: String, first: Int): JobApplicationConnection!
	clientApplicationsConnection(after: String, first: Int): ClientApplicationConnection!
}

enum Package {
	Light,
	Pro,
	Enterprise
}

enum JobPosition {
	Media,
	Graphics,
	Photography,
	PublicRelations
}

type Mutation {
	# DASHBOARD
	# -----------
	# authorization
	login(username: String!, password: String!): AuthPayload!
	# posts
	publish(title: String!, body: String!, thumbnailBody: String!, thumbnailImageId: String ): Post!
	deletePost(id: ID!): Post!
	# admin
	addUser(username: String!, password: String!, name: String!, permissions: [Permission!]!): AuthPayload!
	# PUBLIC
	# -----------
	# applications
	applyClient(
		name: String!
		email: String!,
		address: String,
		phoneNumber: String,
		postsPerMonth: Int!
		photography: Boolean!
		gifs: Int!
		videos: Int!
		videoMinutesCount: Int!
		website: Boolean!
		hasHost: Boolean!
		hasDomain: Boolean!	
		dealYears: Int!
		# preserved even if prices change
		dealPackage: Package!
		totalPrice: Int!
		): ClientApplication!
	applyForWork(
		email: String!,
		address: String,
		phoneNumber: String,
		firstName: String,
		middleName: String,
		lastName: String,
		positions: [JobPosition!]!,
		resumeFileId: String,
		linkedIn: String): JobApplication!
}

type AuthPayload {
	token: String!
	user: User!
}

type User {
	id: ID!
	username: String!
	permissions: [Permission!]!
	name: String!
	posts: [Post!]!
}
